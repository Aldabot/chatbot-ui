{"ast":null,"code":"import _regeneratorRuntime from \"/Users/knowledge/Developer/chatbot-ui/test/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/knowledge/Developer/chatbot-ui/test/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/knowledge/Developer/chatbot-ui/test/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/knowledge/Developer/chatbot-ui/test/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/knowledge/Developer/chatbot-ui/test/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/knowledge/Developer/chatbot-ui/test/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/knowledge/Developer/chatbot-ui/test/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/knowledge/Developer/chatbot-ui/test/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/knowledge/Developer/chatbot-ui/test/src/components/ChatbotContainer.js\";\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 400px;\\n  max-heigth: 400px;\\n  background-color: gray;\\n  margin: auto;\\n  display: flex;\\n  flex-wrap: wrap;\\n  align-content: flex-start;\\n  overflow: scroll;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 10px;\\n  width: 50vw;\\n  margin: auto;\\n  display: flex;\\n  flex-wrap: wrap;\\n  align-content: space-between;\\n  background-color: black;\\n  overflow: hidden;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport styled from 'styled-components';\nimport Message from './Message';\nimport Input from './Input';\nvar client = axios.create({\n  baseURL: 'https://tjh05l55r4.execute-api.eu-west-1.amazonaws.com/dev',\n  timeout: 5000\n});\nvar Container = styled.div(_templateObject());\nvar MessageContainer = styled.div(_templateObject2());\n\nvar ChatbotContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ChatbotContainer, _Component);\n\n  function ChatbotContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ChatbotContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ChatbotContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      messages: [{\n        text: 'Hola',\n        user: false\n      }, {\n        text: 'Hola!',\n        user: true\n      }, {\n        text: 'Que tal?',\n        user: false\n      }]\n    };\n\n    _this.addMessage =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(text) {\n        var _ref2, data, _iteratorNormalCompletion, _didIteratorError, _iteratorError, _iterator, _step, msg;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this.addMessageAndScroll(text, true);\n\n                _context.prev = 1;\n                _context.next = 4;\n                return client.post('/dialogflow', {\n                  query: text,\n                  sessionId: '1'\n                });\n\n              case 4:\n                _ref2 = _context.sent;\n                data = _ref2.data;\n                _iteratorNormalCompletion = true;\n                _didIteratorError = false;\n                _iteratorError = undefined;\n                _context.prev = 9;\n\n                for (_iterator = data[Symbol.iterator](); !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                  msg = _step.value;\n                  console.log(msg);\n\n                  _this.addMessageAndScroll(msg.text.text[0], false);\n                }\n\n                _context.next = 17;\n                break;\n\n              case 13:\n                _context.prev = 13;\n                _context.t0 = _context[\"catch\"](9);\n                _didIteratorError = true;\n                _iteratorError = _context.t0;\n\n              case 17:\n                _context.prev = 17;\n                _context.prev = 18;\n\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n\n              case 20:\n                _context.prev = 20;\n\n                if (!_didIteratorError) {\n                  _context.next = 23;\n                  break;\n                }\n\n                throw _iteratorError;\n\n              case 23:\n                return _context.finish(20);\n\n              case 24:\n                return _context.finish(17);\n\n              case 25:\n                _context.next = 30;\n                break;\n\n              case 27:\n                _context.prev = 27;\n                _context.t1 = _context[\"catch\"](1);\n                console.error(_context.t1);\n\n              case 30:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 27], [9, 13, 17, 25], [18,, 20, 24]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.addMessageAndScroll = function (text, user) {\n      _this.setState({\n        messages: _this.state.messages.concat({\n          text: text,\n          user: user\n        })\n      });\n\n      var objDiv = document.getElementById(\"messages\");\n      objDiv.scrollTop = objDiv.scrollHeight;\n    };\n\n    return _this;\n  }\n\n  _createClass(ChatbotContainer, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(MessageContainer, {\n        id: \"messages\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, this.state.messages.map(function (msg) {\n        return React.createElement(Message, Object.assign({}, msg, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }));\n      })), React.createElement(Input, {\n        addMessage: this.addMessage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ChatbotContainer;\n}(Component);\n\nexport default ChatbotContainer;","map":{"version":3,"sources":["/Users/knowledge/Developer/chatbot-ui/test/src/components/ChatbotContainer.js"],"names":["React","Component","axios","styled","Message","Input","client","create","baseURL","timeout","Container","div","MessageContainer","ChatbotContainer","state","messages","text","user","addMessage","addMessageAndScroll","post","query","sessionId","data","msg","console","log","error","setState","concat","objDiv","document","getElementById","scrollTop","scrollHeight","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport styled from 'styled-components'\nimport Message from './Message'\nimport Input from './Input'\n\nconst client = axios.create({\n  baseURL: 'https://tjh05l55r4.execute-api.eu-west-1.amazonaws.com/dev',\n  timeout: 5000,\n})\n\nconst Container = styled.div`\n  padding: 10px;\n  width: 50vw;\n  margin: auto;\n  display: flex;\n  flex-wrap: wrap;\n  align-content: space-between;\n  background-color: black;\n  overflow: hidden;\n`\n\nconst MessageContainer = styled.div`\n  width: 100%;\n  height: 400px;\n  max-heigth: 400px;\n  background-color: gray;\n  margin: auto;\n  display: flex;\n  flex-wrap: wrap;\n  align-content: flex-start;\n  overflow: scroll;\n`\n\nclass ChatbotContainer extends Component {\n  state = {\n    messages: [\n      {\n        text: 'Hola',\n        user: false\n      },\n      {\n        text: 'Hola!',\n        user: true\n      },\n      {\n        text: 'Que tal?',\n        user: false\n      }\n    ]\n  }\n\n  addMessage = async (text) => {\n    this.addMessageAndScroll(text, true)\n    try {\n      const { data } = await client.post('/dialogflow', {\n        query: text,\n        sessionId: '1'\n      })\n      for(const msg of data) {\n        console.log(msg)\n        this.addMessageAndScroll(msg.text.text[0], false)\n      }\n    } catch(err) {\n      console.error(err)\n    }\n  }\n\n  addMessageAndScroll = (text, user) => {\n    this.setState({\n      messages: this.state.messages.concat({ text, user })\n    })\n    const objDiv = document.getElementById(\"messages\");\n    objDiv.scrollTop = objDiv.scrollHeight;\n  }\n\n  render() {\n    return (\n      <Container>\n        <MessageContainer id=\"messages\">\n          {this.state.messages.map(msg =>\n            <Message {...msg} />\n          )}\n        </MessageContainer>\n        <Input addMessage={this.addMessage} />\n      </Container>\n    )\n  }\n}\n\nexport default ChatbotContainer\n"]},"metadata":{},"sourceType":"module"}